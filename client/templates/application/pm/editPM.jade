template(name='editPMPage')
  if customTemplate
    +editPMPageCustom  
  else  
    .flow-text.container2
      br              
      fieldset.editPM 
        +autoForm schema=pmSchema id='editPMPage' type='method-update' meteormethod='updatePM' doc=viewDoc
          legend Edit PM
          if Template.subscriptionsReady
            .row
              +afQuickField name='createdBy_id' value=createdID type='hidden'
              .col.s12.m6.l3
                +afQuickField name='refID'
              .col.s12.m6.l3
                +afQuickField name='pmPriority'
            .row
              +afQuickField name='pmDescription'
            .row                         
              .col.s12.m6.l3
                h6 Interval Type
                +afFieldInput name='pmIntervalType' id='afIntervalType' type='select-radio-inline'
              .col.s12.m6.l3
                +afQuickField name='pmInterval'  
              if showIntervalUnits                  
                .col.s12.m6.l3
                  +afQuickField name='pmIntervalUnits' type='select-radio-inline' value=intervalUnits                                  
              .col.s12.m6.l3
                +afQuickField name='active'      
            br                        
            .row
              .divider.teal
              .section
                .col.s12.m6.l3
                  h6 Asset Group
                    button.autoform-add-item.btn-floating.waves-effect.waves-light.tooltipped.btnAdd(type='button', data-autoform-field='workPlan', data-position='bottom', data-tooltip='Add Asset Group')
                      i.fa.fa-plus
                  +afQuickField name='assetGroup_ID'
                .col.s12.m6.l3
                  h6 Safety Method
                    button.autoform-add-item.btn-floating.waves-effect.waves-light.tooltipped.btnAdd2(type='button', data-autoform-field='workPlan', data-position='bottom', data-tooltip='Add Safety Method')
                      i.fa.fa-plus                
                  +afQuickField name='safetyPlan_ID'
                .col.s12.m6.l3
                  h6 Work Plan
                    button.autoform-add-item.btn-floating.waves-effect.waves-light.tooltipped.btnAdd3(type='button', data-autoform-field='workPlan', data-position='bottom', data-tooltip='Add Work Plan')
                      i.fa.fa-plus                
                  +afQuickField name='workPlan_ID'   
          else
            +spinner                                                    
          .form-group
            .fixed-action-btn.click-to-toggle(style='bottom: 45px; right: 24px;')
              a.btn-floating.btn-large.purple
                i.large.mdi-navigation-menu
              ul
                li
                  button.btn-floating.yellow.darken-1.tooltipped(type='button', onclick='history.back(-1)', data-position='left', data-tooltip='Go Back')
                    i.material-icons skip_previous
                li
                  button.btn-floating.red.tooltipped(type='reset', data-position='left', data-tooltip='Reset Form')
                    i.fa.fa-undo
                li
                  button.btn-floating.green.tooltipped.btnSubmit(type='submit', data-position='left', data-tooltip='Submit Form')
                    i.fa.fa-check

template(name='editPMPageAddAssetGroup')
  if Template.subscriptionsReady
    .rtable    
      +reactiveTable collection=assetGrpCollection settings=agSettings class='table striped'
  else
    +spinner
    
template(name='selectAssetGroupEditPM')
  button.autoform-add-item.btn-floating.waves-effect.waves-light.tooltipped.btnAdd(type='button', data-autoform-field='workPlan', data-position='bottom', data-tooltip='Select Asset Group')
    i.fa.fa-plus 
  
template(name='editPMPageAddSafetyMethod')
  if Template.subscriptionsReady
    .rtable  
      +reactiveTable collection=safetyMthdCollection settings=smSettings class='table striped'
  else
    +spinner  
    
template(name='selectSafetyMethodEditPM')
  button.autoform-add-item.btn-floating.waves-effect.waves-light.tooltipped.btnAdd1(type='button', data-autoform-field='workPlan', data-position='bottom', data-tooltip='Select Safety Method')
    i.fa.fa-plus    
  
template(name='editPMPageAddWorkPlan') 
  if Template.subscriptionsReady 
    .rtable  
      +reactiveTable collection=workPlCollection settings=wpSettings class='table striped'
  else
    +spinner    
  
template(name='selectWorkPlanEditPM')
  button.autoform-add-item.btn-floating.waves-effect.waves-light.tooltipped.btnAdd2(type='button', data-autoform-field='workPlan', data-position='bottom', data-tooltip='Select Work Plan')
    i.fa.fa-plus 
